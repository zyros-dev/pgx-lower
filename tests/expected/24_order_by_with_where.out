LOAD
'pgx_lower.so';
DROP TABLE IF EXISTS test_order_where;
NOTICE:  table "test_order_where" does not exist, skipping
CREATE TABLE test_order_where
(
    id         SERIAL PRIMARY KEY,
    department VARCHAR(20),
    salary     INTEGER,
    years      INTEGER,
    age        INTEGER,
    name       VARCHAR(50)
);
INSERT INTO test_order_where(department, salary, years, age, name)
VALUES ('Sales', 50000, 3, 28, 'Alice'),
       ('IT', 60000, 2, 25, 'Bob'),
       ('Sales', 45000, 5, 32, 'Carol'),
       ('IT', 65000, 4, 30, 'David'),
       ('Sales', 50000, 1, 24, 'Eve'),
       ('IT', 60000, 6, 35, 'Frank'),
       ('HR', 55000, 3, 29, 'Grace'),
       ('HR', 48000, 2, 26, 'Henry');
SELECT name, salary
FROM test_order_where
WHERE salary > 50000
ORDER BY salary;
NOTICE:  [PGX-LOWER] Routing through PGX_LOWER compilation
 name  | salary 
-------+--------
 Grace |  55000
 Bob   |  60000
 Frank |  60000
 David |  65000
(4 rows)

SELECT name, department, salary
FROM test_order_where
WHERE salary >= 50000
ORDER BY name;
NOTICE:  [PGX-LOWER] Routing through PGX_LOWER compilation
 name  | department | salary 
-------+------------+--------
 Alice | Sales      |  50000
 Bob   | IT         |  60000
 David | IT         |  65000
 Eve   | Sales      |  50000
 Frank | IT         |  60000
 Grace | HR         |  55000
(6 rows)

SELECT name, department, years
FROM test_order_where
WHERE years > 2
  AND department = 'IT'
ORDER BY years;
NOTICE:  [PGX-LOWER] Routing through PGX_LOWER compilation
 name  | department | years 
-------+------------+-------
 David | IT         |     4
 Frank | IT         |     6
(2 rows)

SELECT name, age, salary
FROM test_order_where
WHERE age < 30
ORDER BY salary DESC;
NOTICE:  [PGX-LOWER] Routing through PGX_LOWER compilation
 name  | age | salary 
-------+-----+--------
 Bob   |  25 |  60000
 Grace |  29 |  55000
 Alice |  28 |  50000
 Eve   |  24 |  50000
 Henry |  26 |  48000
(5 rows)

SELECT name, department, salary, years
FROM test_order_where
WHERE salary >= 45000
ORDER BY department, salary DESC;
NOTICE:  [PGX-LOWER] Routing through PGX_LOWER compilation
 name  | department | salary | years 
-------+------------+--------+-------
 Grace | HR         |  55000 |     3
 Henry | HR         |  48000 |     2
 David | IT         |  65000 |     4
 Bob   | IT         |  60000 |     2
 Frank | IT         |  60000 |     6
 Alice | Sales      |  50000 |     3
 Eve   | Sales      |  50000 |     1
 Carol | Sales      |  45000 |     5
(8 rows)

SELECT name, department, age
FROM test_order_where
WHERE department IN ('IT', 'Sales')
ORDER BY department, age;
NOTICE:  [PGX-LOWER] Routing through PGX_LOWER compilation
 name  | department | age 
-------+------------+-----
 Bob   | IT         |  25
 David | IT         |  30
 Frank | IT         |  35
 Eve   | Sales      |  24
 Alice | Sales      |  28
 Carol | Sales      |  32
(6 rows)

SELECT name, salary, age
FROM test_order_where
WHERE salary <> 50000
ORDER BY age, salary;
NOTICE:  [PGX-LOWER] Routing through PGX_LOWER compilation
 name  | salary | age 
-------+--------+-----
 Bob   |  60000 |  25
 Henry |  48000 |  26
 Grace |  55000 |  29
 David |  65000 |  30
 Carol |  45000 |  32
 Frank |  60000 |  35
(6 rows)

DROP TABLE test_order_where;
