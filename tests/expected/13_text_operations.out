LOAD
'pgx_lower';
DROP TABLE IF EXISTS test_text;
NOTICE:  table "test_text" does not exist, skipping
CREATE TABLE test_text
(
    id          SERIAL PRIMARY KEY,
    name        VARCHAR(50),
    description TEXT,
    category    VARCHAR(20)
);
INSERT INTO test_text(name, description, category)
VALUES ('Apple', 'Fresh red apple fruit', 'fruit'),
       ('Banana', 'Yellow curved banana', 'fruit'),
       ('Carrot', 'Orange root vegetable', 'vegetable'),
       ('Avocado', 'Green creamy avocado', 'fruit'),
       ('Spinach', 'Green leafy vegetable', 'vegetable');
SELECT (name LIKE 'A%') AS starts_with_a
FROM test_text;
NOTICE:  [PGX-LOWER] Routing through PGX_LOWER compilation
 starts_with_a 
---------------
 t
 f
 f
 t
 f
(5 rows)

SELECT (name LIKE '%a%') AS contains_a
FROM test_text;
NOTICE:  [PGX-LOWER] Routing through PGX_LOWER compilation
 contains_a 
------------
 f
 t
 t
 t
 t
(5 rows)

SELECT (description LIKE '%green%') AS contains_green
FROM test_text;
NOTICE:  [PGX-LOWER] Routing through PGX_LOWER compilation
 contains_green 
----------------
 f
 f
 f
 f
 f
(5 rows)

SELECT (category LIKE 'fruit') AS is_fruit
FROM test_text;
NOTICE:  [PGX-LOWER] Routing through PGX_LOWER compilation
 is_fruit 
----------
 t
 t
 f
 t
 f
(5 rows)

SELECT (name || ' - ' || description) AS concatenated
FROM test_text;
NOTICE:  [PGX-LOWER] Routing through PGX_LOWER compilation
          concatenated           
---------------------------------
 Apple - Fresh red apple fruit
 Banana - Yellow curved banana
 Carrot - Orange root vegetable
 Avocado - Green creamy avocado
 Spinach - Green leafy vegetable
(5 rows)

SELECT (name || ' (' || category || ')') AS name_with_category
FROM test_text;
NOTICE:  [PGX-LOWER] Routing through PGX_LOWER compilation
 name_with_category  
---------------------
 Apple (fruit)
 Banana (fruit)
 Carrot (vegetable)
 Avocado (fruit)
 Spinach (vegetable)
(5 rows)

SELECT SUBSTRING(name FROM 1 FOR 3) AS name_prefix
FROM test_text;
NOTICE:  [PGX-LOWER] Routing through PGX_LOWER compilation
 name_prefix 
-------------
 App
 Ban
 Car
 Avo
 Spi
(5 rows)

SELECT SUBSTRING(description FROM 1 FOR 10) AS desc_start
FROM test_text;
NOTICE:  [PGX-LOWER] Routing through PGX_LOWER compilation
 desc_start 
------------
 Fresh red 
 Yellow cur
 Orange roo
 Green crea
 Green leaf
(5 rows)

SELECT UPPER(name) AS upper_name
FROM test_text;
NOTICE:  [PGX-LOWER] Routing through PGX_LOWER compilation
 upper_name 
------------
 APPLE
 BANANA
 CARROT
 AVOCADO
 SPINACH
(5 rows)

SELECT LOWER(description) AS lower_desc
FROM test_text;
NOTICE:  [PGX-LOWER] Routing through PGX_LOWER compilation
      lower_desc       
-----------------------
 fresh red apple fruit
 yellow curved banana
 orange root vegetable
 green creamy avocado
 green leafy vegetable
(5 rows)

DROP TABLE test_text;
